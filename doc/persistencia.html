<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=iso-8859-1" http-equiv="content-type">
    <meta name="Author" content="Baltasar Garc&#237;a Perez-Schofield (jbgarcia)">
    <meta name="KeyWords" content="Zero, programaci&#243;n, programming, persistence,
persistencia, persistent, OOP, POO, prototypes, prototipos, objetos, objects,librer&#237;a, est&#225;ndar, standard, library">
    <title>Transparent persistence in Zero</title>
  </head>
  <body>
    <hr>
    <table width="100%">
      <tbody>
        <tr>
          <td>
            <h1>Persistencia en Zero</h1>
            Persistence in the Zero virtual machine</td>
          <td> <img title="Zero" src="../images/tiraZero.jpg" alt="Zero (el avi&#243;n)"
              align="right"> </td>
        </tr>
      </tbody>
    </table>
    <hr>
    <h1>&#205;ndice(index)</h1>
    <p>
    </p>
    <ol>
      <li><a href="#intro">Soporte de persistencia en
          Zero (persistence support in Zero)</a> </li>
      <li><a href="#how">C&#243;mo funciona (how
          it works)</a> </li>
      <li><a href="#example">Un ejemplo sencillo (a
          simple example) </a></li>
      <li><a href="#Internals">Interioridades (internals)</a> </li>
    </ol>
    <p>
    </p>
    <hr>
    <h1><a name="intro">Soporte de persistencia
        transparente en Zero</a></h1>
    <h1 style="font-style: italic;">(Support
      of transparent
      persistence in Zero)</h1>
    <p>Persistencia es la capacidad de un sistema de salvaguardar objetos de
      manera que puedan ser recuperados posteriormente, asi que los objetos
      pueden sobrevivir al proceso que los cre&#243;. En el caso de Zero, este
      soporte de persistencia es transparente, de manera que no es necesario
      utilizar ning&#250;n m&#233;todo o clase especial para guardar o acceder a
      los objetos en el almacenamiento persistente.
      <br>
      <i>
        Persistence is the capability of a system of saving objects in a way
        that they can be restored later, so objects can outlive the process that
        created them. Persistence support in Zero is managed transparently, so
        it is not necessary to use any special method or special class in order
        to save or restore objects in the persistent store.
      </i>
    </p>
    <p>Tanto es as&#237; que los lenguajes de alto nivel dise&#241;ados para la
      m&#225;quina virtual Zero no tienen noci&#243;n alguna de que est&#233;n
      tratando en alg&#250;n momento con objetos persistentes o no persistentes.
      No existe ninguna construcci&#243;n especial, ni un tipo especial de
      referencia, ni siquiera un objeto especial que represente el
      almacenamiento persistente.
      <br>
      <i>
        Moreover, the programming languages designed for the Zero virtual
        machine don't have any notion about persistence, or about when they are
        dealing with persistent or not persistent objects. There isn't an
        special constructions, nor a special </i>
    </p>
    <p>El sistema identifica aquellos objetos que deben ser hechos persistentes
      por alcanzabilidad. Es decir, si un objeto es alcanzable desde otro que es
      persistente (si hay alguna referencia del primero al segundo, o que a
      partir del primero, desde varios objetos intermedios, se puede llegar al
      segundo), entonces el sistema har&#225; que el objeto sea persistente.
      Como se ha comentado, &#233;sto se llama persistencia por alcanzabilidad
      (persistence by reachability), y explica por qu&#233; los lenguajes de
      programaci&#243;n de la m&#225;quina no necesitan ninguna
      construcci&#243;n especial para manejarse con persistencia.
      <br>
      <i>
        The virtual machine identifies those objects that must be made
        persistent by reachability. This means that if an object is reachable
        from another object that is a persistent object (i.e. a reference from
        the first object points to the second object directly, or through any
        number of intermediate objects), then the system will make it
        persistent. As explained before, this is called persistence by
        reachability and explains why the programming languages created dor this
        virtual machine doesn't need any special construction for persistence.
      </i>
    </p>
    <p>
    </p>
    <hr>
    <h1>
      <p><a name="how">C&#243;mo funciona</a></p>
      <p style="font-style: italic;"> (How
        it works)</p>
    </h1>
    <p>
    </p>
    <p>Los objetos en Zero son guardados en directorios de objetos, que en
      terminolog&#237;a Zero se conocen como contenedores (containers). Estos
      directorios existen como objetos totalmente normales en el modelo de
      objetos de Zero, s&#243;lo que cuando la m&#225;quina virtual se encuentra
      con estos objetos, conoce, por sem&#225;ntica, que se trata de una parte
      del almacenamiento persistente. El almacenamiento persistente es
      jer&#225;rquico, de manera que existe un contenedor root del que cuelgan
      todos los dem&#225;s, especialmente el contenedor de la librer&#237;a
      est&#225;ndar, IntStdLib.
      <br>
      <i>
        Objects in Zero are saved in directory objects, which in Zero
        terminology are known as containers. These directories wxist as regular
        objects in the Zero's object model. The only difference comes inside the
        virtual machine, as Zero recognizes them as they actual meaning, parts
        of the persistent store. The persistent store is hierarchical,
        presenting a container, namely root, which is the parent one of the
        reamining ones, specially IntStdLib.
      </i>
    </p>
    <p>Para guardar objetos, el programador lo &#250;nico que ha de hacer es
      crear un contenedor, enlazar los objetos que desea guardar en ese
      contenedor (tal cual se enlazan cualesquiera otros objetos entre s&#237;),
      y finalmente enlazar el contenedor con alg&#250;n otro contenedor ya
      presente en el almacenamiento persistente, lo que garantiza que esos
      objetos se hagan, por alcanzabilidad, persistentes a su vez. La
      mec&#225;nica de &#233;sto se puede ver en el siguiente ejemplo.
      <br>
      <i>
        In order to store objects, programmers do only need to create a
        container, link the objects he or she whises to save in that container
        (as any other object is linked with others, using references), and
        finally link the container with any other container present in the
        persistent store, which will guarantee that these objects will be made,
        because of reachability, also persistent. The mechanism exposed here is
        shown in the following example.
      </i>
    </p>
    <p>
    </p>
    <hr>
    <h1>
      <p><a name="example">Un ejemplo sencillo (a
          simple example) </a></p>
    </h1>
    <p></p>
    En este ejemplo (desarrollado mediante el macroensamblador zm), se
    utilizar&#225;n varios objetos relacionados entre s&#237;
    que permitir&#225;n representar a personas y a parejas. El
    primero objeto, <b>Persona</b>,
    ser&#225; el que acumule los rasgos de
    todos los objetos representando a personas en la aplicaci&#243;n:
    <br>
    <i>In this example
      (developed by means of the macroassembler zm), various objects related
      with each other are used,&#160;representing persons and couples.
      &#160;The first object, <b>Persona</b>, shown below,
      will contain all
      traits of persons:</i>
    <p></p>
    <code><strong>object </strong>Persona <br>
      &#160;&#160;&#160; &#160; &#160;<strong>attribute </strong>+ nombre
      = "juan nadie" <br>
      &#160;&#160;&#160; &#160; &#160;<strong>attribute </strong>+
      email&#160; = Nothing <br>
      &#160;<br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>method
      </strong>+ ponNombre(n) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
nombre
      = n <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>return </strong><br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>endMethod
      </strong><br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
      <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>method
      </strong>+ ponEmail(e) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
email
      = e <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>return </strong><br>
      &#160;&#160;&#160;&#160;&#160; &#160;<strong>endMethod </strong><br>
      &#160;<br>
      &#160; &#160; &#160;&#160; <strong>method </strong>+ toString() <br>
      &#160;&#160;&#160; &#160; &#160; &#160;
      &#160; &#160; &#160;&#160;__rr = nombre.toString() <br>
      &#160;<br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
email.isTheSameAs(
      Nothing ) <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
      <strong>jumpOnTrueTo </strong>fin <br>
      &#160;&#160;&#160;
      &#160;&#160;&#160;&#160;&#160;&#160;
      &#160;&#160;&#160;
      &#160;&#160;&#160;&#160;&#160; __rr = __rr.concat(
      ": " ) <br>
      &#160;&#160;&#160;&#160; <br>
      &#160;&#160;&#160; &#160;&#160;&#160;
      &#160;&#160;&#160;&#160;&#160; &#160; __rr =
      __rr.concat( email.toString() ) <br>
      &#160;<br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      :fin <br>
      &#160;&#160;&#160; &#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>return </strong><br>
      &#160;&#160;&#160; &#160; &#160; <strong>endMethod </strong><br>
      <strong>endObject</strong></code>
    <p>Para representar a parejas, se utilizar&#225; un objeto
      que se asocie con personas:
      <br>
      <i>
        In order to represent couples, an object related to persons
        will be used:</i> </p>
    <code><strong>object </strong>Pareja <br>
      &#160;&#160;&#160; &#160; &#160; <strong>attribute </strong>+ hombre
      = Persona <br>
      &#160;&#160;&#160; &#160; &#160; <strong>attribute </strong>+
      mujer&#160; = Persona <br>
      &#160;&#160;&#160; &#160; &#160; <strong>attribute </strong>+
      dependientes = Nothing <br>
      &#160;<br>
      &#160;&#160;&#160; &#160; &#160; <strong>method </strong>+
      ponPareja(a, b) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; hombre = a <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; mujer&#160; = b <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>return </strong><br>
      &#160;&#160;&#160; &#160; &#160; <strong>endMethod </strong><br>
      &#160;<br>
      &#160;&#160;&#160; &#160; &#160; <strong>method </strong>+
      ponDependiente(x) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; dependientes.isTheSameAs(
      Nothing ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>jumpOnFalseTo </strong>mas <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; &#160;dependientes =
      VectorInstance.copy( "" ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      :mas <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; dependientes.add( x ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>return </strong><br>
      &#160;&#160;&#160; &#160; &#160; <strong>endMethod </strong><br>
      &#160;<br>
      &#160;&#160; &#160; &#160; &#160;<strong>method </strong>+
      toString() <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; __rr = "Pareja formada por:
      " <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; __rr = __rr.concat(
      hombre.toString() ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; __rr = __rr.concat( ", y "
      ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; __rr = __rr.concat(
      mujer.toString() ) <br>
      &#160;<br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; dependientes.isTheSameAs(
      Nothing ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160; <strong>jumpOnTrueTo </strong>Fin <br>
      &#160;<br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160;__rr = __rr.concat(
      "\nDependientes: " ) <br>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
      &#160; &#160; &#160; &#160;__rr = __rr.concat(
      dependientes.toString() ) <br>
      &#160;<br>
      &#160; &#160; &#160;&#160;&#160; :Fin <br>
      &#160;&#160; &#160; &#160; &#160; &#160;
      &#160; &#160; &#160;__rr =
      __rr.concat( "." ) <br>
      &#160; &#160; &#160; &#160; &#160; &#160;
      &#160; &#160; <strong>return </strong><br>
      &#160; &#160; &#160; &#160; <strong>endMethod </strong><br>
      <strong>endObject</strong>
  </code>
  <p>Finalmente, en el objeto de la aplicaci&#243;n
    se
    crear&#225;n varias personas, relacion&#225;ndolas mediante
    una pareja:&#160;
    <br>
    <i>
      Finally, in the application object a few persons will be
      created, being related by a couple:</i></p>
  <code>
    <strong>object </strong>PruebaPersistente : ConsoleApplication <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;
    <strong>method </strong>+ doIt() <br>
    &#160; &#160; &#160; &#160; &#160;&#160;
    &#160;&#160;&#160; <strong>reference </strong>disney &#160; &#160;
    &#160; =
    ContainerInstance.copy( "Disney" ) <br>
    &#160;&#160;&#160; &#160;&#160; &#160;
    &#160; &#160; &#160; <strong>reference </strong>mascotas &#160;
    &#160; =
    VectorInstance.copy( "mascotas" ) <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;<strong>reference </strong>donaldYdaisy =
    Pareja.copy( "" ) <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>reference
    </strong>donald&#160;&#160;&#160;&#160;&#160;&#160; =
    Persona.copy( "" ) <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>reference
    </strong>daisy&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    = Persona.copy( "" ) <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>reference
    </strong>jorgito&#160;&#160;&#160;&#160;&#160; =
    Persona.copy( "" ) <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>reference
    </strong>juanito&#160;&#160;&#160;&#160;&#160; =
    Persona.copy( "" ) <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;<strong>reference
    </strong>jaimito&#160;&#160;&#160;&#160;&#160; =
    Persona.copy( "" ) <br>
    &#160;<br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;donald.ponNombre(
"Donald"
    ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;donald.ponEmail(
"donald@disney.com"
    ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;daisy.ponNombre(
"Daisy"
    ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;daisy.ponEmail(
"daisy@disney.com"
    ) <br>
    &#160;<br>
    &#160; &#160; &#160; &#160; &#160;&#160;
    &#160;&#160;&#160; jorgito.ponNombre( "Jorgito" ) <br>
    &#160;&#160;&#160; &#160;&#160; &#160;
    &#160; &#160; &#160; jaimito.ponNombre( "Jaimito" ) <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;juanito.ponNombre( "Juanito"
    ) <br>
    &#160;<br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;donaldYdaisy.ponPareja(
donald,
    daisy ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;donaldYdaisy.ponDependiente(
jorgito
    ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;donaldYdaisy.ponDependiente(
jaimito
    ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;donaldYdaisy.ponDependiente(
juanito
    )<br>
    &#160; &#160; &#160; &#160;
    &#160;&#160; &#160;&#160;&#160; mascotas.add(
    "Pluto" ) <br>
    &#160;&#160;&#160; &#160;&#160; &#160;
    &#160; &#160; &#160; mascotas.add( "Goofy" ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
donaldYdaisy.ponDependiente(
    mascotas ) <br>
    &#160;<br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
System.console.write(
    "\nComenzando guardado ...\n" ) <br>
    &#160;<br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
System.console.write(
    donaldYdaisy ) <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
System.console.lf()
    <br>
    &#160;<br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
disney.addRenamedObject(
    "donaldYdaisy", donaldYdaisy ) <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;psRoot.add( disney ) <br>
    &#160;<br>
    &#160;&#160;&#160;
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;
    &#160; &#160;System.console.write( "\nGuardado de manera
    persistente\n" ) <br>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>return
    </strong><br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;
    <strong>endMethod </strong><br>
    <strong>endObject</strong>
  </code>
  <p>Una vez que se ejecuta este programa, los objetos
    relacionados
    con la pareja donaldYdisney han sido guardados en el almacenamiento
    persistente. La m&#225;quina virtual sigue todos los enlaces
    desde la pareja, asegur&#225;ndose de que todos los objetos
    necesarios son guardados, de manera
    que puedan ser recuperados m&#225;s tarde.
    <br>
    <i>
      Once this program is executed, all objects related to the
      couple donaldYdisney are saved in the persistent store. The virtual
      machine
      will follow all links in order to be sure that all needed objects are
      saved, so they can be restored later.</i></p>
  <p>Para garantizar que la informaci&#243;n que se
    lee es la
    guardada por el programa anterior, se utilizar&#225; otro objeto
    (mucho m&#225;s peque&#241;o) que se encargue,
    s&#237;mplemente, de recuperarla.
    <br>
    <i>
      In order to guarantee that the information retrieved is just the
      one stored in the persistent store another smaller object will be created
      for simple restoring.</i></p>
  <code>
    <strong>object </strong>VerPruebaPersistente : ConsoleApplication <br>
    &#160;&#160;&#160; &#160; &#160; &#160;<strong>method </strong>+
    doIt() <br>
    &#160;&#160;&#160;
    &#160;&#160;&#160; &#160; &#160; &#160;
    &#160;__this.prepare() <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;System.console.write(
    "Recuperando info persistente:\n" ) <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;System.console.lf() <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;System.console.write(
    psRoot.Disney.donaldYdaisy ) <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;System.console.lf()<br>
    <br>
    &#160;&#160;&#160; &#160;&#160;&#160;
    &#160; &#160; &#160; &#160;<strong>return</strong><br>
    &#160;&#160;&#160; &#160; &#160;
    &#160;<strong>endMethod </strong><br>
    <strong>endObject</strong> </code>
  <p>La salida de este objeto, una vez ejecutado, es:
    <br>
    <i>The output of this object, once executed, follows:</i></p>
  <code> $ zvm VerPruebaPersistente
    <br>
    Recuperando info persistente:
    <br>
    Pareja formada por: Donald: donald@disney.com, y Daisy: daisy@disney.com<br>
    Dependientes: Jorgito, Jaimito, Juanito, Pluto, Goofy. </code>
<p></p>
<hr>
<h1>
  <p> <a name="Internals">Algunas
      interioridades </a> </p>
  <p style="font-style: italic;"> (Internals) </p>
</h1>
<p>
  Inicialmente, en el directorio de instalaci&#243;n de Zero, la m&#225;quina
  virtual (zvm) y la librer&#237;a est&#225;ndar deben existir juntos. Cuando la
  m&#225;quina virtual es lanzada la primera vez con soporte de persistencia (es
  decir, sin el modificador --nops), se crea un directorio bajo el directorio de
  instalaci&#243;n llamado ZeroPS. En ese directorio se encontrar&#225; el
  contenedor root.zbj y el directorio Root, que aglutinar&#225; bajo &#233;l a
  todos los dem&#225;s contenedores (directa o indirectamente), ya que es el
  contenedor raiz. La lbrer&#237;a est&#225;ndar estar&#225; guardada bajo este
  contenedor raiz, como InstStdLib.zbj, de manera que cuando la m&#225;quina
  virtual, zvm, es llamada con --nops ...
  <br>
  <i>Initially, in the
    installation directory of Zero, the virtual
    machine (zvm program) and the standard library (IntStdLib.zbj) must be
    found together. When the VM is&#160;triggered for the first time
    with
    persistence support (i.e., without the --nops switch), the&#160;VM
    creates a directory called ZeroPS under the installation directory.
    Under this directory, the root one also appears, which is representing
    the root container (apart from root.zbj), the root container . The
    standard library is found saved under this root directory, as
    IntStdLib.zbj. When the VM is executed with the --nops switch,</i></p>
<p><code> $ ./zvm --nops Version </code></p>
<p>
  entonces se usa la librer&#237;a est&#225;ndar en el directorio de
  instalaci&#243;n, mientras que la encontrada en el almacenamiento persistente
  es utilizada con soporte de persistencia:
  <br>
  <i>then the
    standard library in the installation directory is used, while the one
    present in the PS is used when triggered with persistence support:
  </i></p>
<p><code> $ ./zvm Version </code></p>
<p>
  Si bien, el objeto Version.zbj distribuido con el sistema no hace uso del
  almacenamiento persistente (aparte, claro est&#225;, de IntStdLib).
  <br>
  <i>Though the Version.zbj object
    distributed with the system
    doesn't make use of the PS (apart from the IntStdLib, of course).
  </i></p>
<p>
  La estructura completa del almacenamiento persistente es una asociaci&#243;n
  entre contenedores y directorios (ahora s&#237;, directorios del sistema de
  ficheros). Si un contenedor no tiene subcontenedores, entonces no tendr&#225;
  un directorio asociado o estar&#225; vac&#237;o. En caso contrario, el
  directorio existe, contiene los .zbj de sus contenedores (y sus respectivos
  directorios asociados), y tiene el mismo nombre que el contenedor (sin la
  extensi&#243;n .zbj).
  <br>
  <i>The whole structure of the
    persistent store is a mapping
    between containers and directories (of the file system). If a container
    doesn't have
    children containers then it won't have a subdirectory or it will be
    empty. If it has, then the subdirectory won't be empty. Otherwise, it will
    have the same name the container has, containing its subcontainers files
    (*.zbj) and their associated directories.
  </i></p>
<p>
  Es posible crear un objeto con cualquier de los lenguajes disponibles que
  generen Zero <i>bytecode</i>, o con el [macro]ensamblador Zero mismo, y
  colocar adcuadamente el fichero zbj generado en la estructura de directorios.
  Por ejemplo, si un objeto llamado <b>Areas</b> es compilado dentro de un
  archivo llamado Math, (que deber&#237;a convertirse en Math.zbj), ser&#225;
  considerado como el contenedor <b>Math</b> con el objeto <b>Areas</b> en su
  interior.
  <br>
  <i>It is possible to create an
    object with a programming language
    generating zero bytecode, or with the zero [macro]assembler itself and
    place it (the .zbj file) adequately in the directory structure. For
    example, if an object called <b>Areas</b> is compiled
    using a file name Math, (which should become Math.zbj), then it will be
    considered as the <b>Math</b> container with the <b>Areas</b>
    object inside it.
  </i></p>
<p><code> <strong>OBJ </strong>Areas
    <br>
    &#160;&#160;<strong>MTH </strong>+ areaOfSquare x
    <br>
    &#160;&#160;&#160;&#160;<strong>SET </strong>x
    <br>
    &#160;&#160;&#160;&#160;<strong>MSG </strong>__acc multiplyBy __acc
    <br>
    &#160;&#160;&#160;&#160;<strong>ASG </strong>__rr
    <br>
    &#160;&#160;&#160;&#160;<strong>RET
    </strong><br>
    &#160;&#160;<strong>ENM
    </strong><br>
    <strong>ENO</strong> </code></p>
<p>Por ejemplo, podr&#237;a ser emplazado dentro del contenedor raiz, Root.
  <br>
  <i>For instance, it could be
    placed under the root directory,
  </i></p>
<p><code> $ ./za Math
    <br>
    $ cd ZeroPS
    <br>
    $ cd Root
    <br>
    $ mv ../../Math.zbj . </code>
</p>
As&#237; podr&#237;a ser accedido (usando Prowl o macroensamblador) mediante la
sentencia:
<br>
<i>so it could be accessed through (using
  the Prowl programming language,
  or the macroassembler), by a sentence such as:</i>
<p><code> System.console.write(
    psRoot.Math.Areas.areaOfSquare( 7 ) ); </code></p>
<p>
  O mediante (utilizando el ensamblador):
  <br>
  <i>or through (using plain
    assembler):
  </i></p>
<p><code> <strong>INT </strong>7
    <br>
    <strong>MSG </strong>psRoot.Math.Areas areaOfSquare __acc
    <br>
    <strong>MSG </strong>System.console write __acc </code></p>
<p>
  Mostrando 49, como se esperaba.
  <br>
  <i>Showing 49 as result, as
    expected.</i> </p>
<p>
</p>
<hr>
<table width="100%">
  <tbody>
    <tr>
      <td> <a href="http://www.ei.uvigo.es/%7Ejgarcia/">J.
          Baltasar Garc&#237;a Perez-Schofield</a>&#160; <a href="mailto:jbgarcia@uvigo.es">jbgarcia@uvigo.es</a>
      </td>
    </tr>
  </tbody>
</table>
<hr>
</body>
</html>
